/**
* React-reparenting v0.5.0
* https://paol-imi.github.io/react-reparenting
* Copyright (c) 2020-present, Paol-imi
* https://github.com/Paol-imi/react-reparenting/blob/master/LICENSE
* @license MIT
*/
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@babel/runtime/helpers/classCallCheck"),r=require("@babel/runtime/helpers/assertThisInitialized"),n=require("@babel/runtime/helpers/inherits"),t=require("@babel/runtime/helpers/possibleConstructorReturn"),i=require("@babel/runtime/helpers/getPrototypeOf"),u=require("@babel/runtime/helpers/wrapNativeSuper"),l=require("@babel/runtime/helpers/defineProperty"),a=require("react"),o=require("@babel/runtime/helpers/createClass");function f(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var s=f(e),c=f(r),d=f(n),b=f(t),p=f(i),h=f(u),v=f(l),g=f(a),m=f(o),C={appendChildToContainer:function(e,r){e.appendChild(r)},insertInContainerBefore:function(e,r,n){e.insertBefore(r,n)},removeChildFromContainer:function(e,r){e.removeChild(r)},isElement:function(e,r){return r instanceof Element}};function y(e,r){var n=e.child;if(null===n)return null;if(-1===r)for(;n.sibling;)n=n.sibling;else for(;n.sibling&&r>0;)r-=1,n=n.sibling;return n}function F(e,r){var n=e.child;if(null===n)return null;if(n.key===r)return e;for(var t=n.sibling;t;){if(t.key===r)return n;t=(n=t).sibling}return null}function x(e,r){for(var n=e.sibling;n&&n.key!==r;)n=n.sibling;return n}function E(e,r,n){if(-1===n)return R(e,r);if(0===n)return k(e,r);var t=y(e,n-1);return null===t?k(e,r):_(t,r)}function N(e,r,n){var t=F(e,n);return null===t?R(e,r):t===e?k(e,r):_(t,r)}function R(e,r){var n=y(e,-1);return null===n?k(e,r):_(n,r)}function _(e,r){var n=e.sibling,t=e.index+1;return e.sibling=r,r.return=e.return,r.sibling=n,t}function k(e,r){var n=e.child;return e.child=r,r.sibling=n,r.return=e,0}function T(e,r){for(;e;)e.index=r,e=e.sibling,r+=1;return r-1}function q(e,r,n){for(;e;){if(n(e))return e;e=r(e)}return null}function I(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,t=p.default(e);if(r){var i=p.default(this).constructor;n=Reflect.construct(t,arguments,i)}else n=t.apply(this,arguments);return b.default(this,n)}}var O=function(e){d.default(n,e);var r=I(n);function n(){var e;s.default(this,n);for(var t=arguments.length,i=new Array(t),u=0;u<t;u++)i[u]=arguments[u];return e=r.call.apply(r,[this].concat(i)),v.default(c.default(e),"name","Invariant"),e}return n}(h.default(Error));function S(e,r){if(!e)throw new O("Invariant failed")}function w(e,r,n,t){var i;if(S("number"!=typeof n||n>=-1),T(r,i="number"==typeof n?E(e,r,n):N(e,r,n)),null===r.alternate||null===e.alternate?null!==r.alternate&&(r.alternate.return=null,r.alternate.sibling=null):("number"==typeof n?E(e.alternate,r.alternate,n):N(e.alternate,r.alternate,n),T(r.alternate,i)),t)return i;var u=q(e,(function(e){return e.return}),(function(e){return C.isElement(e.elementType,e.stateNode)})),l=q(r,(function(e){return e.child}),(function(e){return C.isElement(e.elementType,e.stateNode)}));if(null===u)return i;if(null===l)return i;var a=u.stateNode,o=l.stateNode;if(null===r.sibling)C.appendChildToContainer(a,o);else{var f=q(r.sibling,(function(e){return e.child}),(function(e){return C.isElement(e.elementType,e.stateNode)}));if(null!==f){var s=f.stateNode;C.insertInContainerBefore(a,o,s)}}return i}function P(e,r){if(0===r)return B(e);var n=y(e,r-1);return null===n?null:D(n)}function A(e,r){var n=F(e,r);return null===n?null:n===e?B(e):D(n)}function B(e){var r=e.child;return null===r?null:(e.child=r.sibling,r)}function D(e){var r=e.sibling;return null===r?null:(e.sibling=r.sibling,r)}function j(e,r,n){S("number"!=typeof r||r>=0);var t=null;if(null===(t="number"==typeof r?P(e,r):A(e,r)))return null;if(null!==t.sibling&&T(t.sibling,t.index),null!==t.alternate&&null!==e.alternate){var i=null;S(null!==(i="number"==typeof r?P(e.alternate,r):A(e.alternate,r))),null!==i.sibling&&T(i.sibling,i.index)}if(n)return t;var u=q(e,(function(e){return e.return}),(function(e){return C.isElement(e.elementType,e.stateNode)})),l=q(t,(function(e){return e.child}),(function(e){return C.isElement(e.elementType,e.stateNode)}));if(null===u)return t;if(null===l)return t;var a=u.stateNode,o=l.stateNode;return C.removeChildFromContainer(a,o),t}function L(e){if(null===e.alternate)return e;for(var r=e;null!==r.return;)r=r.return;return S(null!==r.stateNode&&"current"in r.stateNode),r.stateNode.current===r?e:e.alternate}function M(){return g.default.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner.current}var U=function(){function e(r){s.default(this,e),v.default(this,"fiber",null),v.default(this,"findFiber",void 0),r&&this.setFiber(r)}return m.default(e,[{key:"setFiber",value:function(e){this.fiber=e}},{key:"setFinder",value:function(e){this.findFiber=e}},{key:"getCurrent",value:function(){S(null!==this.fiber);var e=L(this.fiber);return"function"==typeof this.findFiber?this.findFiber(e):e}},{key:"addChild",value:function(e,r,n){return w(this.getCurrent(),e,r,n)}},{key:"removeChild",value:function(e,r){return j(this.getCurrent(),e,r)}},{key:"sendChild",value:function(e,r,n,t){var i=this.removeChild(r,t);return null===i?-1:e.addChild(i,n,t)}},{key:"clear",value:function(){this.fiber=null}}]),e}();function z(e){var r=a.useRef(null);if(null===r.current){r.current=new U;var n=M();S(null!==n),r.current.setFiber(n)}return r.current.setFinder(e),a.useEffect((function(){return function(){var e;return null===(e=r.current)||void 0===e?void 0:e.clear()}}),[]),r.current}exports.Env=C,exports.ParentFiber=U,exports.addChild=w,exports.addChildFiberAt=E,exports.addChildFiberBefore=N,exports.addSiblingFiber=_,exports.appendChildFiber=R,exports.configure=function(e){return Object.assign(C,e)},exports.createReparentableSpace=function(){var e=new Map;return{Reparentable:function(r){var n=r.id,t=r.children,i=z(r.findFiber);return a.useEffect((function(){return S("string"==typeof n),e.set(n,i),function(){e.delete(n),i.clear()}}),[]),t},sendReparentableChild:function(r,n,t,i,u){var l=e.get(r),a=e.get(n);return void 0===l||void 0===a?-1:l.sendChild(a,t,i,u)},ReparentableMap:e}},exports.findChildFiber=function(e,r){var n=e.child;return null===n?null:n.key===r?n:x(n,r)},exports.findChildFiberAt=y,exports.findPreviousFiber=F,exports.findSiblingFiber=x,exports.getCurrentFiber=L,exports.getCurrentOwner=M,exports.getFiberFromPath=q,exports.prependChildFiber=k,exports.removeChild=j,exports.removeChildFiber=A,exports.removeChildFiberAt=P,exports.removeFirstChildFiber=B,exports.removeSiblingFiber=D,exports.updateFibersIndex=T,exports.useParent=z;
